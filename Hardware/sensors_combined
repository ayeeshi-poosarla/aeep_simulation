import serial
import time

# Set up serial connections
ser = serial.Serial('/dev/ttyACM0', 9600) #force
arduino = serial.Serial('/dev/ttyACM1', 115200, timeout=1) #imu
time.sleep(2)

filename = "datafile.txt"
f = open("datafile.txt", "a")

//having waiting loop until force is over threshold
while True:
    force = ser.readline().decode('utf-8').strip()
    if force > 0.05:
        start_time = time.time()
        break

count = 0
while True:
    #read in data from the serial
    force = ser.readline().decode('utf-8').strip()
    imu = arduino.readline().decode('utf-8').strip()

    if force < 0.05:
        count += 1
    else if: 
        count = 0
    #If force threshold has not been met for 10 loops exit the loop
    if count > 10:
        break; 

    cur_time = time.time()  # Get current time at the end
    elapsed_time = cur_time - start_time
    print("Force: ", force)
    print(imu)

    f.write("Force: ", force)
    f.write(imu)

f.close()
